## RPC 基本介绍
1. RPC（Remote Procedure Call）—远程过程调用，是一个计算机通信协议。该协议允许运行于一台计算机的程序调用另一台计算机的子程序，而程序员无需额外地为这个交互作用编程
2. 两个或多个应用程序都分布在不同的服务器上，它们之间的调用都像是本地方法调用一样。

简单的RPC调用流程

![img.png](ezrpc.png)

1. 服务消费方（client）以本地调用方式调用服务
2. client stub 接收到调用后负责将方法、参数等封装成能够进行网络传输的消息体
3. client stub 将消息进行编码并发送到服务端
4. server stub 收到消息后进行解码
5. server stub 根据解码结果调用本地的服务
6. 本地服务执行并将结果返回给 server stub
7. server stub 将返回导入结果进行编码并发送至消费方
8. client stub 接收到消息并进行解码
9. 服务消费方（client）得到结果

小结：RPC 的目标就是将 2 - 8 这些步骤都封装起来，用户无需关心这些细节，可以像调用本地方法一样即可完成远程服务调用

初始不使用注册中心，直接给发送的消息加一个消息头，服务器解析消息头找到对应的服务.

加入注册中心的RPC框架：

![img.png](rpc.png)

## 有了HTTP为什么还要rpc框架
1. http消息封装臃肿。
2. RPC 框架一般都有注册中心，有丰富的监控管理；
3. RPC会使用序列化，更节省空间

## 注册中心

### 什么是注册中心？

注册中心可以说是微服务架构中的“通讯录”，它记录了服务和服务地址的映射关系。在分布式架构中，服务会注册到这里，当服务需要调用其它服务时，就到这里找到服务的地址，进行调用。

简单理解就是：在没有注册中心时候，服务间调用需要知道被当服务调方的具体地址（写死的 ip:port）。 更换部署地址，就不得不修改调用当中指定的地址。
而有了注册中心之后，每个服务在调用别人的时候只需要知道服务名称（软编码）就好，地址都会通过注册中心根据服务名称获取到具体的服务地址进行调用。

总结：服务注册中心的作用就是「服务的注册」和「服务的发现」。

### 为什么需要注册中心

1. 服务管理
2. 服务之间的自动发现
3. 服务的依赖关系管理







