## 商城订单防止重复下单的问题
    
进入结算页，会重新调用接口，这时候返回一个新的token。token放在redis中。当下单成功，将token删除。如果重复下单，
则发现没有这个token，就下单失败，防止了重复下单

* 为什么不用分布式锁？ 

## 商城库存问题

下单读取库存是直接获取的redis库存。扣减也是用的redis库存，在扣减之后，直接消息自发自收去扣减数据库的库存

* 直接用redis是 1 redis的所有操作是原子的，不会有并发问题 2. redis的更新速度会比数据库快速很多

## 商城下单优化


